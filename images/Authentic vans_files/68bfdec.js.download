(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{1082:function(t,e,n){"use strict";var o=n(16),l=n(1),r=n(35),c=n(164),d=n(32),y=n(431),v=n(10),h=n(33),f=n(111),P=n(89);const m=Object(l.ref)("cart"),w=Object(l.ref)(!1);var _=function(){const{root:t}=Object(r.a)(),{localePath:e}=Object(o.a)(t),{placeOrder:n,paymentMethod:l}=Object(c.a)(t),{cartId:_,initPayPalSession:C,updatePayPalSession:I,updateCart:x,setMiniCart:O}=Object(d.b)(t),{setPayPalOrderObject:j,payPalCheckoutFlowInProgress:B,setPayPalCheckoutFlowInProgress:k,setPayPalPaymentInProgress:D}=Object(y.a)(t),{displayErrorMessages:A}=Object(h.a)(t),{hideSpinner:E,showSpinner:V}=Object(f.a)(),S=t=>{w.value=t};return{renderPayPalButton:(o,style)=>{let r,c;const d=t=>{var e,n;"payment"===m.value?null===(e=null==c?void 0:c[t])||void 0===e||e.call(c):null===(n=null==c?void 0:c.enable)||void 0===n||n.call(c)},y=async()=>{l.value=P.b.PAYPAL,await n(),k(!1),D(!1),d("enable")};paypal.Buttons({style:style,onInit:function(data,t){c=t,d(B.value?"disable":"enable"),S(!0)},onCancel:function(){D(!1)},onClick:async function(){D(!0),"payment"===m.value&&B.value&&await y()},createOrder:async function(){var t,e;try{const t=(await C()).data.payment_instruments.find((element=>"PAYPAL"===element.payment_method_id));if(!t)throw new Error("Init PayPal session error");return r={c_paymentID:"",c_requestID:"",...t},r.c_paymentID}catch(n){throw A(null===(e=null===(t=null==n?void 0:n.response)||void 0===t?void 0:t.data)||void 0===e?void 0:e.errorDetails),new Error("Init PayPal session error")}},onApprove:async function(data){var n,o;try{if(V(),data.paymentID&&(r.c_paymentID=data.paymentID),j(r,data.payerID),data.paymentID||"payment"===m.value)await y();else try{const n=await I({cartId:_.value,paymentInstrumentId:r.payment_instrument_id,payerId:data.payerID,paymentMethodId:P.b.PAYPAL,requestId:r.c_requestID});O(!1),k(!0),await x(n.data),t.$router.push(e(v.a.CHECKOUT_SHIPPING()))}catch(t){A((null===(o=null===(n=null==t?void 0:t.response)||void 0===n?void 0:n.data)||void 0===o?void 0:o.errorDetails)||(null==t?void 0:t.message))}finally{D(!1)}}finally{E()}},onError:t=>{console.error("error from the onError callback",t)}}).render(o)},payPalContext:m,setPayPalContext:t=>{m.value=t},isButtonVisible:w,setButtonVisiability:S}},C=Object(l.defineComponent)({name:"PayPal",props:{header:{type:String,default:""},fullWidth:{type:Boolean,default:!1},context:{type:String,required:!0}},setup(t){var e,n,c,d,y,v,h,f,P,m,w,C,I,x;const{root:O}=Object(r.a)(),{defaultCurrency:j}=Object(o.a)(O),B=Object(l.ref)(!1),{renderPayPalButton:k,setPayPalContext:D,payPalContext:A,isButtonVisible:E,setButtonVisiability:V}=_(),S={color:null!==(c=null===(n=null===(e=O.$themeConfig)||void 0===e?void 0:e.payPal)||void 0===n?void 0:n.color)&&void 0!==c?c:"gold",shape:null!==(v=null===(y=null===(d=O.$themeConfig)||void 0===d?void 0:d.payPal)||void 0===y?void 0:y.shape)&&void 0!==v?v:"rect",height:null!==(x=null!==(m=null===(P=null===(f=null===(h=O.$themeConfig)||void 0===h?void 0:h.payPal)||void 0===f?void 0:f.height)||void 0===P?void 0:P[t.context])&&void 0!==m?m:null===(I=null===(C=null===(w=O.$themeConfig)||void 0===w?void 0:w.payPal)||void 0===C?void 0:C.height)||void 0===I?void 0:I.base)&&void 0!==x?x:43};Object(l.watch)((()=>t.context),(t=>D(t)),{immediate:!0});const L=O.$getEnvValueByCurrentLocale("PAYPAL_CLIENT_ID");return{defaultCurrency:j,initPayPalButton:()=>{B.value&&document.querySelectorAll(".paypal-container__paypal-express-button").forEach((button=>{k(button,S)}))},payPalContext:A,scriptReady:B,payPalClientId:L,isButtonVisible:E,setButtonVisiability:V}},head(){return{script:[{hid:"ppexpress",src:"https://www.paypal.com/sdk/js?client-id=".concat(this.payPalClientId,"&disable-funding=card,p24,credit,sepa&intent=order&currency=").concat(this.defaultCurrency),callback:()=>{this.setButtonVisiability(!1),this.scriptReady=!0,this.initPayPalButton()}}]}}}),I=(n(1537),n(5)),component=Object(I.a)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"paypal-container"},[t.header?n("p",{staticClass:"paypal-container__header",domProps:{innerHTML:t._s(t.header)}}):t._e(),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isButtonVisible,expression:"isButtonVisible"}],staticClass:"paypal-container__button-wrapper",class:{"full-width":t.fullWidth}},[n("div",{staticClass:"paypal-container__paypal-express-button",class:{"full-width":t.fullWidth}})])])}),[],!1,null,"51c4c0f1",null);e.a=component.exports},1162:function(t,e,n){var content=n(1538);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(21).default)("544bc158",content,!0,{sourceMap:!1})},1537:function(t,e,n){"use strict";n(1162)},1538:function(t,e,n){var o=n(20)((function(i){return i[1]}));o.push([t.i,".paypal-container[data-v-51c4c0f1]{--vf-checkout-sidebar-paypal-button-width:100%;--vf-checkout-sidebar-paypal-button-margin:0;--vf-checkout-sidebar-paypal-font-size:var(--font-base)}.paypal-container__header[data-v-51c4c0f1]{font-size:var(--vf-checkout-sidebar-paypal-font-size,inherit)}.paypal-container__button-wrapper[data-v-51c4c0f1]{position:relative}.paypal-container__button-wrapper[data-v-51c4c0f1]:not(.full-width){max-width:300px}.paypal-container__paypal-express-button[data-v-51c4c0f1]{margin:var(--vf-checkout-sidebar-paypal-button-margin);position:relative;text-align:center;width:var(--vf-checkout-sidebar-paypal-button-width);z-index:0}.paypal-container__paypal-express-button[data-v-51c4c0f1]:not(.full-width){margin-top:24px;max-width:300px}",""]),o.locals={},t.exports=o}}]);
//# sourceMappingURL=68bfdec.js.map