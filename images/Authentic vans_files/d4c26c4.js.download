(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{1171:function(e,t,o){var content=o(1552);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(21).default)("2ec7be1e",content,!0,{sourceMap:!1})},1173:function(e,t,o){var content=o(1556);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(21).default)("e8b7e2f6",content,!0,{sourceMap:!1})},1551:function(e,t,o){"use strict";o(1171)},1552:function(e,t,o){var n=o(20)((function(i){return i[1]}));n.push([e.i,".vf-notify-me-modal[data-v-10457e3c]{--modal-width-lg:60%}@media (min-width:1440px){.vf-notify-me-modal[data-v-10457e3c] .options-swatch__wrapper{grid-template-columns:repeat(auto-fit,minmax(12%,1fr))}}@media (min-width:1024px) and (max-width:1439px){.vf-notify-me-modal[data-v-10457e3c] .options-swatch__wrapper{grid-template-columns:repeat(auto-fit,minmax(15%,1fr))}}",""]),n.locals={},e.exports=n},1555:function(e,t,o){"use strict";o(1173)},1556:function(e,t,o){var n=o(20)((function(i){return i[1]}));n.push([e.i,".product-add-to-cart[data-v-5895b356]{--vf-product-add-to-cart-margin:0 0 var(--spacer-base,1rem);margin:var(--vf-product-add-to-cart-margin,0 0 1rem)}@media (min-width:1024px){.product-add-to-cart[data-v-5895b356]{display:flex;flex-wrap:var(--vf-product-action-buttons-wrap)}.product-add-to-cart div[data-v-5895b356]{width:100%}}.product-add-to-cart__favorites[data-v-5895b356]{display:flex;flex-wrap:nowrap}.product-add-to-cart__favorites .product-add-to-cart__cta[data-v-5895b356]{margin-right:var(--spacer-xs)}@media (min-width:1024px){.product-add-to-cart__favorites .product-add-to-cart__cta[data-v-5895b356]{margin-right:var(--spacer-lg);max-width:300px}}",""]),n.locals={},e.exports=n},480:function(e,t,o){"use strict";o.r(t);var n=o(1),l=o(32),r=o(36),c=o(49),d=o(30),v=o(70),f=o(1009),m=o(108),y=o(154),h=o(10),w=o(22),O=o(87),x=o(77),j=o(35),C=o(67),M=(o(15),Object(n.defineComponent)({name:"NotifyMeModal",props:{visible:{type:Boolean,default:!1},translations:{type:Object,required:!0},sizes:{type:Array,default:()=>[]},notificationVisible:{type:Boolean,default:!1},prepopulateEmail:{type:String,default:""},contextKey:{type:String,default:"page-content"}},setup(e,t){let{emit:o}=t;const{root:l}=Object(j.a)(),{availableAttributes:r,subscribeToBackInStockNotification:d,productSize:f,product:m}=Object(c.a)(l,e.contextKey),{addNotification:h,clearNotifications:w}=Object(y.a)(l),{dispatchEvent:O}=Object(v.a)(l),x=Object(n.ref)(!1),C=Object(n.ref)(!1),M=Object(n.computed)((()=>{var e;return(null===(e=r.value)||void 0===e?void 0:e.size)?r.value.size:[]})),S=Object(n.computed)((()=>m.value.variants.find((e=>e.attributes.size===B.value)))),_=Object(n.ref)(""),B=Object(n.computed)((()=>{if(_.value)return _.value;if(f.value){return T.value.some((e=>e.value===f.value.value))?f.value.value:_.value}return""})),T=Object(n.computed)((()=>e.sizes.filter((e=>!e.available)))),E=Object(n.computed)((()=>{var t,o;return e.translations.notifyBoxTextBox?e.translations.notifyBoxTextBox.replace("{{name}}","<b>".concat(null===(t=m.value)||void 0===t?void 0:t.name,"</b>")).replace("{{color}}","<b>".concat(null===(o=m.value)||void 0===o?void 0:o.colorDescription,"</b>")).replace("{{size}}",B.value?"<b>".concat(B.value,"</b>"):""):""}));return{product:m,availableVariants:M,handleNotifyme:async t=>{w();try{const n=await d(t,S.value.id);x.value=null==n?void 0:n.success,x.value?h({message:e.translations.notificationMessage,type:"success"}):(h({message:e.translations.notificationAlreadySubscribedMessage,type:"danger"}),C.value=!1),O({eventName:"loadEventData",overrideAttributes:{eventCategory:"PDP",eventAction:"Notify Me",eventLabel:"".concat(S.value.id," - ").concat(m.value.colorDescription,": ").concat(B.value)}}),_.value=""}catch(t){h({message:e.translations.notificationErrorMessage,type:"danger"}),x.value=!1}finally{o("close")}},onSelectSize:e=>{_.value=e.value},onCloseModal:()=>{o("close"),_.value=""},selectedSize:_,sizeValue:B,unavailableSizes:T,notifyBoxText:E}}})),S=(o(1551),o(5)),_=Object(S.a)(M,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("VfModal",{staticClass:"vf-notify-me-modal modal",attrs:{visible:e.visible},on:{close:e.onCloseModal}},[o("VfNotifyMe",{attrs:{"data-cm-metadata":e.$previewMetaDataLocation(e.$attrs["data-id"],"componentConfig"),translations:e.translations,"text-box":e.notifyBoxText,"notification-visible":e.notificationVisible,"prepopulate-email":e.prepopulateEmail,"html-text-box":"","disabled-submit":!e.sizeValue},on:{"send-notifyme":function(t){return e.handleNotifyme(t)}},scopedSlots:e._u([{key:"size-swatches",fn:function(){return[o("VfOptionsSwatch",{staticClass:"vf-notify-me-modal__options-swatch",attrs:{"data-cm-metadata":e.$previewMetaDataLocation(e.$attrs["data-id"],"resourceBundle"),sizes:e.unavailableSizes,"show-more-text":e.translations.showMoreText,"out-of-stock-text":e.translations.outOfStock,"round-items":!0,value:e.sizeValue,"available-variants":e.unavailableSizes,product:e.product,"view-all-options-default":!0,"show-only-unavailable-sizes":"","show-alt-labels":""},on:{input:function(t){return e.onSelectSize(t)}}})]},proxy:!0}])})],1)}),[],!1,null,"10457e3c",null).exports,B=o(267),T=o(473);const E={largeScreenClass:"vf-button--medium",notifyClass:"vf-button--secondary"};var z=Object(n.defineComponent)({name:"ProductAddToCart",components:{NotifyMeModal:_,SaveToFavorites:T.default},props:{translations:{type:Object,required:!0},enableNotifyMe:{type:Boolean,default:!1},contextKey:{type:String,default:"product"},showAddToFavourites:{type:Boolean,default:!1},signInToBuyModal:{type:String,default:null}},emits:["click-add-to-favorites","click-find-in-store","click-remove-from-favorites","close-find-in-store-modal"],setup(e){var t;const{root:o}=Object(j.a)(),{setMiniCart:M,addItem:S,isAddItemRequestPending:_}=Object(l.b)(o),{onBaseDone:T}=Object(r.a)(o),{product:z,isQuickShopContext:A,availableAttributes:N,checkAttributes:$,scrollToFirstValidationError:k,isAllAttributesSelected:F,isSelectedProductOutOfStock:V,productSize:L,productZip:D,productWidth:I,productLength:H,isNotifyMeFormVisible:K,isUnavailableSizeHovered:P}=Object(c.a)(o,e.contextKey),{loyaltyEnrolled:R}=Object(d.a)(o),{dispatchEvent:W}=Object(v.a)(o),{upsellItem:U,isUpsellSelected:J}=Object(f.a)(o,e.contextKey),{customerEmail:Q}=Object(m.a)(o),{clearNotifications:Z}=Object(y.a)(o),{openModal:G,closeModal:X}=Object(C.a)(),Y=Object(n.ref)(null),ee=Object(n.ref)(!1),te={...E,...o.$themeConfig.productAddToCart},ae=Object(n.computed)((()=>te.enableLoading&&_.value)),oe=Object(n.computed)((()=>z.value.presale&&!R.value)),ie=te.closeMiniCartDelay||(null===(t=o.$viewport)||void 0===t?void 0:t.isSmall)?6e3:void 0,ne=Object(n.computed)((()=>J.value?[z.value,U.value]:z.value)),le=async()=>{if(Z(),$())return void(()=>{const{scrollToError:e,scrollToErrorOffset:t}=te;e&&k(t)})();(t=>{t&&(W({...Object(O.a)("cart:add",{}),composablesContexts:{useProduct:e.contextKey},overrideAttributes:Object(w.c)(z.value,o.$themeConfig)}),W(Object(O.a)("cart:update",{})),X(),!A.value&&o.$viewport.isSmall&&Object(x.a)(),o.$route.path.endsWith(h.a.CART())||M(!0,ie))})(await S(ne.value,{isTemporary:!1}))},se=()=>{var e,t,n;const l=null===(t=null===(e=Y.value)||void 0===e?void 0:e.$el)||void 0===t?void 0:t.getBoundingClientRect(),r=null===(n=document.getElementsByClassName("vf-header__container")[0])||void 0===n?void 0:n.offsetHeight;0!==(null==l?void 0:l.width)&&(o.$eventBus.$emit("headerControlVisibility",(null==l?void 0:l.top)<=r),ye.value||o.$eventBus.$emit("showStickyHeader",(null==l?void 0:l.bottom)<=0))},re=Object(n.computed)((()=>{var e,t;return null===(t=null===(e=z.value)||void 0===e?void 0:e.color)||void 0===t?void 0:t.value}));Object(n.watch)([re,L,D,H,I],(()=>{K.value=!1,ee.value=!1}));const ce=Object(n.computed)((()=>{var e;return o.$featureFlags.notifyMe&&(V.value||P.value)&&(null===(e=z.value)||void 0===e?void 0:e.notifyMe)})),de=Object(n.computed)((()=>{var e,t;return!ce.value&&[V.value,!re.value,be("size",null===(e=z.value.size)||void 0===e?void 0:e.value),be("length",null===(t=z.value.length)||void 0===t?void 0:t.value),_.value].some(Boolean)})),ue=Object(n.computed)((()=>{var e,t,n,l,r;const c=[];return A.value||(null===(e=o.$viewport)||void 0===e?void 0:e.isSmall)||(null===(t=z.value)||void 0===t?void 0:t.dummyCustoms)?c.push("vf-button--fullWidth"):c.push(te.largeScreenClass),(null===(r=null===(l=null===(n=z.value)||void 0===n?void 0:n.variant)||void 0===l?void 0:l.stock)||void 0===r?void 0:r.buyable)?c.push(te.activeClass):F.value&&c.push(te.notifyClass),c})),ve=Object(n.ref)(""),pe=Object(n.ref)(!1);te.enableSuccessLabel&&Object(n.watch)(_,(t=>{t?pe.value=!0:pe.value&&(pe.value=!1,ve.value=e.translations.buttonCTASuccess,setTimeout((()=>{ve.value=""}),2e3))}));const fe=Object(n.computed)((()=>{if(ce.value)return e.translations.buttonCTANotify;if(ve.value)return ve.value;const t=ce.value&&!de.value?e.translations.buttonCTANotify:e.translations.buttonCTADiscontinued;return _.value||!V.value?e.translations.buttonCTAActive:t})),be=(e,t)=>!!N.value[e]&&(null!==z.value[e]&&!N.value[e].find((o=>o.attributes[e]==t)));let me=Object(n.ref)(null);const ye=Object(n.ref)(!1),he=e=>{ye.value=e.isIntersecting&&e.boundingClientRect.height>window.innerHeight,ye.value&&o.$eventBus.$emit("showStickyHeader",!1)},ge=()=>{var e,t;me.value&&me.value.disconnect();const o=document.getElementsByClassName("vf-footer")[0],n=o?null===(e=o)||void 0===e?void 0:e.offsetHeight:0,l=document.getElementsByClassName("sticky-add-to-cart")[0],r=l?null===(t=l)||void 0===t?void 0:t.offsetHeight:0,c=n>window.innerHeight?(window.innerHeight-r)/n:1;me.value=new IntersectionObserver((e=>{e.forEach(he)}),{threshold:c});try{me.value.observe(o)}catch(e){console.error("Cannot observe footerEl (.vf-footer):",e)}},we=Object(B.a)(ge,1e3);Object(n.onMounted)((()=>(e=>{let{root:t,product:o,showStickyHeader:l,validateAndAddToCart:r,loyaltyEnrolled:c,onBaseDone:d,intersectFooter:v,debounceIntersectFooter:f}=e;window.addEventListener("resize",f),v(),document.addEventListener("scroll",l),t.$eventBus.$on("pDpStickyEmit",r),o.value.presale&&Object(n.watch)(c,((e,t)=>{t!==e&&e&&o.value.size&&d((()=>{r()}))}))})({root:o,product:z,showStickyHeader:se,validateAndAddToCart:le,loyaltyEnrolled:R,onBaseDone:T,intersectFooter:ge,debounceIntersectFooter:we})));const Oe=Object(n.computed)((()=>{if(!z.value)return[];let e=(z.value.attributes||[]).find((e=>"size"===e.code));return(null==e?void 0:e.options)||[]}));return Object(n.onBeforeUnmount)((()=>{me.value.disconnect(),window.removeEventListener("resize",we),document.removeEventListener("scroll",se),o.$eventBus.$off("pDpStickyEmit",le)})),{validateAndAddToCart:le,isButtonLoading:ae,isButtonDeactivated:de,isSignInToBuy:oe,showNotifyMeForm:()=>{K.value=!0},isNotifyMeFormVisible:K,product:z,productSize:L,productColor:re,productLength:H,productWidth:I,productZip:D,buttonClasses:ue,isQuickShopContext:A,buttonText:fe,addToCartRef:Y,isNotifyMeEnabled:ce,isNotifyMeMessageVisible:ee,customerEmail:Q,openLoginModal:()=>{G({type:"lazyFragment",resourceId:e.signInToBuyModal})},handleIntersectingEntry:he,hiddenByObservable:ye,showStickyHeader:se,availableSizes:Oe,observer:me,intersectFooter:ge}}}),A=(o(1555),Object(S.a)(z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"product-add-to-cart",attrs:{"data-cm-metadata":e.$previewMetaDataLocation(e.$attrs["data-id"])}},[o("div",{class:{"product-add-to-cart__favorites":e.showAddToFavourites}},[e.isNotifyMeEnabled&&e.isNotifyMeFormVisible?e._e():[e.isSignInToBuy?e._e():o("VfButton",{ref:"addToCartRef",staticClass:"product-add-to-cart__cta",class:e.buttonClasses,attrs:{"data-cm-metadata":e.$previewMetaDataLocation(e.$attrs["data-id"],"componentConfig"),disabled:e.isButtonDeactivated,loading:e.isButtonLoading},on:{click:function(t){e.isNotifyMeEnabled?e.showNotifyMeForm():e.validateAndAddToCart()}}},[e._v("\n        "+e._s(e.buttonText)+"\n      ")]),e._v(" "),e.showAddToFavourites?o("SaveToFavorites",{attrs:{"context-key":e.contextKey,"aria-label":e.translations.favoritesAriaLabel,"heart-button":"","added-to-favorites-notification":e.translations.addedToFavoritesNotification}}):e._e(),e._v(" "),e.isSignInToBuy?o("VfButton",{staticClass:"product-add-to-cart__cta",class:e.buttonClasses,attrs:{"data-cm-metadata":e.$previewMetaDataLocation(e.$attrs["data-id"],"componentConfig")},on:{click:e.openLoginModal}},[e._v("\n        "+e._s(e.translations.signInToBuy)+"\n      ")]):e._e()],e._v(" "),e.isNotifyMeEnabled||e.isNotifyMeFormVisible?o("NotifyMeModal",{attrs:{translations:e.translations,visible:e.isNotifyMeFormVisible,sizes:e.availableSizes,"prepopulate-email":e.customerEmail,"context-key":e.contextKey},on:{close:function(t){e.isNotifyMeFormVisible=!1}}}):e._e()],2)])}),[],!1,null,"5895b356",null));t.default=A.exports}}]);
//# sourceMappingURL=d4c26c4.js.map